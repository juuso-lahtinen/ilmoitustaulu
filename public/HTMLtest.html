<!DOCTYPE html><html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lomake-esimerkki</title>
    <style>
        input:invalid {border: 2px dashed red;}
    </style>
</head>
<body>
<form>
    Nickname: <input type = "text" name ="nick_name" placeholder="Batman" id="nickname"> <br>
    <textarea name="comment" id="comment">Hey... say something!</textarea> <br>
    <input onclick="makeUpdate()" type="button" value="Lähetä" id="submit"> <br>
    <div id="formatCheck"></div>
</form>
</body>
<script>

    var counter = 0;
    function makeUpdate(){

        //at this time we use generic counter value to generate id's for table post and table time
        counter++;
        var nickName = document.getElementById("nickname").value;
        //get current date and display it in 2021-3-4 format
        var todayDate = new Date();
        var date = todayDate.getFullYear()+'-'+(todayDate.getMonth()+1)+'-'+todayDate.getDate();
        //get current time and display it in 12:23:45 format
        var todayTime = new Date();
        var timeStamp = todayTime.getHours() + ":" + todayTime.getMinutes() + ":" + todayTime.getSeconds();
        var comment = document.getElementById("comment").value;
        //make a JSON string
        var newPost = '{"nickName": "'+nickName+'", "date": "'+date+'", "comment": "'+comment+'", "timeStamp": "'+timeStamp+'", "counter": "'+counter+'"}'

        //unnecessary but helpful...
        document.getElementById("formatCheck").innerHTML = newPost;

        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("formatCheck").innerHTML = xmlhttp.responseText;
            }
        };
        xmlhttp.open("POST", "http://localhost:8081/api/POST", true);
        xmlhttp.setRequestHeader("Content-Type", "application/json");
        xmlhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
        xmlhttp.send(newPost);
    }
</script>
</html>